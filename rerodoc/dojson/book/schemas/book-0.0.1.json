{
    "description": "A book document...",
    "title": "Book",
    "required": [
        "title",
        "language",
        "recid",
        "type"
        ],
    "id": "http://doc.rero.ch/schemas/book-0.0.1.json",
    "$schema": "http://json-schema.org/schema#",
    "type": "object",
    "properties": {
        "type":{
            "propertyOrder": 1,
            "uniqueItems": true,
            "minItems": 2,
            "maxItems": 2,
            "type": "array",
            "default": [
                "bibrec",
                "book"
            ],
            "readOnly": true,
            "items": {
                "type": "string",
                "enum": [
                    "book",
                    "bibrec"
                ]
            },
            "title": "Document type"
        },
        "recid":{
            "propertyOrder": 2,
            "type": "string",
            "title": "RERO DOC identifier",
            "readOnly": true,
            "default": "1234"
        },
        "rero_id":{
            "propertyOrder": 3,
            "type": "string",
            "title": "RERO identifier"
        },
        "media_type":{
            "propertyOrder": 4,
            "type": "string",
            "title": "media type",
            "readOnly": true,
            "format": "uri",
            "default": "http://rdvocab.info/termList/RDAMediaType/1003"
        },
        "isbn10":{
            "propertyOrder": 5,
            "type": "string",
            "title": "ISBN identifier with 10 digits",
            "pattern": "^[0-9]{1,5}-[0-9]{1,7}-[0-9]{1,7}-[0-9,X]{1}$"
        },
        "isbn13":{
            "propertyOrder": 5,
            "type": "string",
            "title": "ISBN identifier with 13 digits",
            "pattern": "^978[0-9]{9}[0-9]{1}$"
        },
        "language": {"$ref": "language#"},
        "title": {
            "propertyOrder": 7,
            "type": "object",
            "title": "Document title",
            "required": [
                "maintitle",
                "lang"
            ],
            "properties": {
                "lang": {
                    "propertyOrder": 1,
                    "type": "string",
                    "title": "Title language",
                    "enumSource": [{
                        "source": [{
                            "value": "fre",
                            "title": "French"
                        },{
                            "value": "eng",
                            "title": "English"
                        },{
                            "value": "ger",
                            "title": "German"
                        },{
                            "value": "ita",
                            "title": "Italian"
                        }],
                        "title": "{{item.title}}",
                        "value": "{{item.value}}"
                    }]
                },
                "maintitle": {
                    "propertyOrder": 2,
                    "type": "string",
                    "title": "Main title of the document"
                },
                "subtitle": {
                    "propertyOrder": 3,
                    "type": "string",
                    "title": "Subtitle of the document"
                },
                "full": {
                    "propertyOrder": 4,
                    "type": "string",
                    "title": "Concatenation of title and subtitle",
                    "template": "{{maintitle}}: {{subtitle}}",
                    "watch": {
                        "maintitle": "title.maintitle",
                        "subtitle": "title.subtitle"
                    }
                }
            }
        },
        "other_title": {
            "propertyOrder": 7,
            "type": "object",
            "title": "Alternative document title",
            "properties": {
                "lang": {
                    "propertyOrder": 1,
                    "type": "string",
                    "title": "Title language",
                    "enumSource": [{
                        "source": [{
                            "value": "fre",
                            "title": "French"
                        },{
                            "value": "eng",
                            "title": "English"
                        },{
                            "value": "ger",
                            "title": "German"
                        },{
                            "value": "ita",
                            "title": "Italian"
                        }],
                        "title": "{{item.title}}",
                        "value": "{{item.value}}"
                    }]
                },
                "maintitle": {
                    "propertyOrder": 2,
                    "type": "string",
                    "title": "Main title of the document"
                },
                "subtitle": {
                    "propertyOrder": 3,
                    "type": "string",
                    "title": "Subtitle of the document"
                },
                "full": {
                    "propertyOrder": 4,
                    "type": "string",
                    "title": "Alternative title as string",
                    "template": "{{maintitle}} {{subtitle}}",
                    "watch": {
                        "maintitle": "other_title.maintitle",
                        "subtitle": "other_title.subtitle"
                    }
                }
            }
        },
        "authors": {
            "propertyOrder": 8,
            "uniqueItems": true,
            "minItems" : 1,
            "items": {
                "type": "object",
                "id": "author_item",
                "properties": {
                    "first_name": {
                        "propertyOrder": 1,
                        "title": "First name",
                        "type": "string"
                    },
                    "last_name": {
                        "propertyOrder": 2,
                        "title": "Last name",
                        "type": "string"
                    },
                    "name": {
                        "propertyOrder": 3,
                        "title": "Author name",
                        "type": "string",
                        "description": "author name as it appears in the paper",
                        "format": ".+, .+",
                        "template": "{{last_name}}, {{first_name}}",
                        "watch": {
                            "first_name": "author_item.first_name",
                            "last_name": "author_item.last_name"
                        }
                    },
                    "date": {
                        "propertyOrder": 4,
                        "title": "Birth and death date of the author",
                        "type": "string"
                    },
                     "affiliation": {
                        "propertyOrder": 5,
                        "title": "Affiliation",
                        "type": "string",
                        "description": "author's affiliation"
                    },
                    "orcid": {
                        "propertyOrder": 6,
                        "pattern": "\\d{4}-\\d{4}-\\d{4}-\\d{4}",
                        "title": "ORCID ID",
                        "type": "string",
                        "description": "ORCID Id when available",
                        "format": "orcid"
                    },
                    "role": {
                        "propertyOrder": 7,
                        "enum": [
                            "Dir.",
                            "Codir."
                        ],
                        "type": "string",
                        "description": "Role of the author within the paper.",
                        "title": "Role of the person"
                    },
                    "full": {
                        "propertyOrder": 8,
                        "title": "Author name",
                        "type": "string",
                        "description": "Author as string",
                        "template": "{{name}} {{date}} ({{role}})",
                        "watch": {
                            "name": "author_item.name",
                            "date": "author_item.date",
                            "role": "author_item.role"
                        }
                    }
                },
                "title": "Author"
            },
            "type": "array",
            "description": "List with all the authors",
            "title": "Authors"
        },
        "corporate":{
            "propertyOrder": 9,
            "uniqueItems": true,
            "type": "array",
            "title": "Corporate Authors",
            "items": {  
                "type": "object",
                "id": "corporate_item",
                "properties": {
                    "name": {
                        "propertyOrder": 1,
                        "title": "name",
                        "type": "string"
                    },
                    "full": {
                        "template": "{{name}}",
                        "type": "string",
                        "title": "name as string",
                        "watch": {
                            "name": "corporate_item.name"
                        }
                    }
                }
            }
        },
        "meeting": {
            "propertyOrder": 10,
            "type": "object",
            "id": "meeting",
            "title": "Meeting",
            "properties": {
                "name": {
                    "propertyOrder": 1,
                    "title": "name",
                    "type": "string"
                },
                "location": {
                    "propertyOrder": 2,
                    "title": "location",
                    "type": "string"
                },
                "date": {
                    "propertyOrder": 3,
                    "title": "Meeting date event",
                    "type": "string"
                },
                "number": {
                    "propertyOrder": 4,
                    "title": "Number",
                    "type": "string",
                    "description": "meeting number"
                },
                "full": {
                    "propertyOrder": 5,
                    "title": "Author name",
                    "type": "string",
                    "description": "Author as string",
                    "template": "{{name}} {{number}} {{date}} {{location}}",
                    "watch": {
                        "name": "meeting.name",
                        "location": "meeting.location",
                        "date": "meeting.date",
                        "number": "meeting.number"
                    }
                }
            }
        },
        "edition": {
            "type": "object",
            "title": "Edition",
            "properties": { 
                "name": {
                    "propertyOrder": 1,
                    "type": "string",
                    "title": "Edition name"
                },
                "remainder": {
                    "propertyOrder": 2,
                    "type": "string",
                    "title": "Remainder of the edition"
                },
                "full": {
                    "propertyOrder": 3,
                    "type": "string",
                    "title": "Edition as string",
                    "template": "{{name}} {{remainder}}",
                    "watch": {
                        "name": "edition.name",
                        "remainder": "edition.remainder"
                    }
                }
            }
        },
        "publication": {
            "type": "object",
            "title": "publication",
            "properties": { 
                "location": {
                    "propertyOrder": 1,
                    "type": "string",
                    "title": "Publication location"
                },
                "publisher": {
                    "propertyOrder": 2,
                    "type": "string",
                    "title": "Publisher of the publication"
                },
                "date": {
                    "propertyOrder": 3,
                    "type": "string",
                    "title": "Publication date"
                },
                "print_location": {
                    "propertyOrder": 4,
                    "type": "string",
                    "title": "Location of the printer of the publication"
                },
                "printer": {
                    "propertyOrder": 5,
                    "type": "string",
                    "title": "Printer of the publication"
                },
                 "full": {
                    "propertyOrder": 6,
                    "type": "string",
                    "title": "Publication as string",
                    "template": "{{location}} {{publisher}} {{date}} {{print_location}} {{printer}}",
                    "watch": {
                        "location": "publication.location",
                        "publisher": "publication.publisher",
                        "date": "publication.date",
                        "print_location": "publication.print_location",
                        "printer": "publication.printer"
                    }
                }
            }
        },
        "collation": {
            "type": "object",
            "title": "Collation of the document",
            "properties": {
                "pages": {
                    "propertyOrder": 1,
                    "type": "string",
                    "title": "Number of pages"
                },
                "other": {
                    "propertyOrder": 2,
                    "type": "string",
                    "title": "Other infos"
                },
                "dimension": {
                    "propertyOrder": 3,
                    "type": "string",
                    "title": "Dimension of the document",
                    "template": "{{width}} x {{height}}",
                    "watch": {
                        "width": "dimension.width",
                        "height": "dimension.height"
                    }
                },
                "full": {
                    "propertyOrder": 4,
                    "type": "string",
                    "title": "Collation as string",
                    "template": "{{pages}} p. {{other}} {{dimension}} cm",
                    "watch": {
                        "pages": "collation.pages",
                        "other": "collation.other",
                        "dimension": "collation.dimension"
                    }
                }
            }
        },
        "dimension": {
            "type": "object",
            "title": "Dimension of the document in cm",
            "properties": {
                "width": {
                    "propertyOrder": 1,
                    "type": "integer",
                    "title": "Width of the book"
                },    
                "height": {
                    "propertyOrder": 2,
                    "type": "integer",
                    "title": "Height of the book"
                }
            }
        },
        "publication_date": {
            "type": "object",
            "title": "Date of publication",
            "properties": {
                "from": {
                    "propertyOrder": 1,
                    "type": "integer",
                    "title": "From date",
                    "default": 2005
                    },

                "to": {
                    "propertyOrder": 2,
                    "type": "integer",
                    "title": "To date",
                    "default": 2015
                },
                "full": {
                    "propertyOrder": 3,
                    "type": "string",
                    "title": "Date as string",
                    "template": "{{fdate}}-{{tdate}}",
                    "watch": {
                        "fdate": "publication_date.from",
                        "tdate": "publication_date.to"
                    }
                }
            }  
        },
        "series": {
            "type": "object",
            "title": "Part of series",
            "properties": {
                "name": {
                    "propertyOrder": 1,
                    "type": "string",
                    "title": "Name of the series"
                },
                "volume": {
                    "propertyOrder": 2,
                    "type": "string",
                    "title": "Volume number of the series"
                }
            }        
        }
    }
}
