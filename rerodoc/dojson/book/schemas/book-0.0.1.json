{
    "description": "A book document...",
    "title": "Book",
    "required": [
        "title",
        "language",
        "recid",
        "type"
        ],
    "id": "http://doc.rero.ch/schemas/book-0.0.1.json",
    "$schema": "http://json-schema.org/schema#",
    "type": "object",
    "properties": {
        "type":{
            "propertyOrder": 1,
            "uniqueItems": true,
            "minItems": 2,
            "maxItems": 2,
            "type": "array",
            "default": [
                "bibrec",
                "book"
            ],
            "readOnly": true,
            "items": {
                "type": "string",
                "enum": [
                    "book",
                    "bibrec"
                ]
            },
            "title": "Document type"
        },
        "recid":{
            "propertyOrder": 2,
            "type": "string",
            "title": "RERO DOC identifier",
            "readOnly": true,
            "default": "1234"
        },
        "rero_id":{
            "propertyOrder": 3,
            "type": "string",
            "title": "RERO identifier"
        },
        "media_type":{
            "propertyOrder": 4,
            "type": "string",
            "title": "media type",
            "enum": [
                "http://rdvocab.info/termList/RDAMediaType/1003"
            ]
        },
        "isbn10":{
            "propertyOrder": 5,
            "type": "string",
            "title": "ISBN identifier with 10 digits",
            "pattern": "^[0-9]{1,5}-[0-9]{1,7}-[0-9]{1,7}-[0-9,X]{1}$"
        },
        "isbn13":{
            "propertyOrder": 5,
            "type": "string",
            "title": "ISBN identifier with 13 digits",
            "pattern": "^978[0-9]{9}[0-9]{1}$"
        },
        "language": {
            "propertyOrder": 6,
            "type": "string",
            "description": "FIXME: we shall provide the ISO enum",
            "title": "Language",
            "enumSource": [{
                "source": [{
                    "value": "fre",
                    "title": "French"
                },{
                    "value": "eng",
                    "title": "English"
                }],
                "title": "{{item.title}}",
                "value": "{{item.value}}"
            }]
        },
        "title": {
            "propertyOrder": 7,
            "type": "object",
            "title": "Document title",
            "required": [
                "maintitle",
                "lang"
            ],
            "properties": {
                "lang": {
                    "type": "string",
                    "title": "Title language",
                    "enum": [
                        "fre",
                        "ger",
                        "eng",
                        "ita"
                    ]
                },
                "maintitle": {
                    "type": "string",
                    "title": "Main title of the document"
                },
                "subtitle": {
                    "type": "string",
                    "title": "Subtitle of the document"
                },
                "full": {
                    "type": "string",
                    "title": "Concatenation of title and subtitle",
                    "template": "{{maintitle}}: {{subtitle}}",
                    "watch": {
                        "maintitle": "title.maintitle",
                        "subtitle": "title.subtitle"
                    }
                }
            }
        },
        "edition": {
            "type": "object",
            "title": "Edition",
            "properties": { 
                "name": {
                    "type": "string",
                    "title": "Edition name"
                },
                "remainder": {
                    "type": "string",
                    "title": "Remainder of the edition"
                },
                "full": {
                    "type": "string",
                    "title": "Edition as string",
                    "template": "{{name}} {{remainder}}",
                    "watch": {
                        "name": "edition.name",
                        "remainder": "edition.remainder"
                    }
                }
            }
        },
        "publication": {
            "type": "object",
            "title": "publication",
            "properties": { 
                "location": {
                    "type": "string",
                    "title": "Publication location"
                },
                "publisher": {
                    "type": "string",
                    "title": "Publisher of the publication"
                },
                "date": {
                    "type": "string",
                    "title": "Publication date"
                },
                "print_location": {
                    "type": "string",
                    "title": "Location of the printer of the publication"
                },
                "printer": {
                    "type": "string",
                    "title": "Printer of the publication"
                },
                 "full": {
                    "type": "string",
                    "title": "Publication as string",
                    "template": "{{location}} {{publisher}} {{date}} {{print_location}} {{printer}}",
                    "watch": {
                        "location": "publication.location",
                        "publisher": "publication.publisher",
                        "date": "publication.date",
                        "print_location": "publication.print_location",
                        "printer": "publication.printer"
                    }
                }
            }
        },
        "other_title": {
            "propertyOrder": 7,
            "type": "object",
            "title": "Alternative document title",
            "properties": {
                "lang": {
                    "type": "string",
                    "title": "Title language"
                },
                "subtitle": {
                    "type": "string",
                    "title": "Subtitle of the document"
                },
                "maintitle": {
                    "type": "string",
                    "title": "Main title of the document"
                },
                "full": {
                    "type": "string",
                    "title": "Alternative title as string",
                    "template": "{{maintitle}} {{subtitle}}",
                    "watch": {
                        "maintitle": "other_title.maintitle",
                        "subtitle": "other_title.subtitle"
                    }
                }
            }
        },
        
        "collation": {
            "type": "object",
            "title": "Collation of the document",
            "properties": {
                "pages": {
                    "type": "string",
                    "title": "Number of pages"
                },
                "other": {
                    "type": "string",
                    "title": "Other infos"
                },
                "dimension": {
                    "type": "string",
                    "title": "Dimension of the document",
                    "template": "{{width}} x {{height}}",
                    "watch": {
                        "width": "dimension.width",
                        "height": "dimension.height"
                    }
                },
                "full": {
                    "type": "string",
                    "title": "Collation as string",
                    "template": "{{pages}} p. {{other}} {{dimension}} cm",
                    "watch": {
                        "pages": "collation.pages",
                        "other": "collation.other",
                        "dimension": "collation.dimension"
                    }
                }
            }
        },
        "dimension": {
            "type": "object",
            "title": "Dimension of the document in cm",
            "properties": {
                "width": {
                    "type": "integer",
                    "title": "Width of the book"
                },    
                "height": {
                    "type": "integer",
                    "title": "Height of the book"
                }
            }
        },
        "publication_date": {
            "type": "object",
            "title": "Date of publication",
            "properties": {
                "from": {
                    "type": "integer",
                    "title": "From date",
                    "default": 2005
                    },

                "to": {
                    "type": "integer",
                    "title": "To date",
                    "default": 2015
                },
                "full": {
                    "type": "string",
                    "title": "Date as string",
                    "template": "{{fdate}}-{{tdate}}",
                    "watch": {
                        "fdate": "publication_date.from",
                        "tdate": "publication_date.to"
                    }
                }
            }  
        },
        "series": {
            "type": "object",
            "title": "Part of series",
            "properties": {
                "name": {
                    "type": "string",
                    "title": "Name of the series"
                },
                "volume": {
                    "type": "string",
                    "title": "Volume number of the series"
                }
            }
            
        },
        "authors": {
            "propertyOrder": 8,
            "uniqueItems": true,
            "minItems" : 1,
            "items": {
                "type": "object",
                "id": "author_item",
                "properties": {
                    "name": {
                        "title": "Author name",
                        "type": "string",
                        "description": "author name as it appears in the paper",
                        "format": ".+, .+"
                    },
                    "date": {
                        "title": "Birth and death date of the author",
                        "type": "string",
                        "description": "Should be of the form <yyyy-mm-dd> - <yyyy-mm-dd>"
                    },
                     "affiliation": {
                        "title": "Author name",
                        "type": "string",
                        "description": "author's affiliation"
                    },
                    "orcid": {
                        "pattern": "\\d{4}-\\d{4}-\\d{4}-\\d{4}",
                        "title": "ORCID ID",
                        "type": "string",
                        "description": "ORCID Id when available",
                        "format": "orcid"
                    },
                    "role": {
                        "enum": [
                            "Dir.",
                            "Codir."
                        ],
                        "type": "string",
                        "description": "Role of the author within the paper.",
                        "title": "Role of the person"
                    },
                    "full": {
                        "title": "Author name",
                        "type": "string",
                        "description": "Author as string",
                        "template": "{{name}} {{date}} ({{role}})",
                        "watch": {
                            "name": "author_item.name",
                            "date": "author_item.date",
                            "role": "author_item.role"
                        }
                    }
                },
                "title": "Author"
            },
            "type": "array",
            "description": "List with all the authors",
            "title": "Authors"
        }
    }
}
